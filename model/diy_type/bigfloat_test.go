package diy_type

import (
	"strings"
	"testing"
)


type testAdd struct {
	a string
	b string
	output string
}

var testAddTable = []*testAdd {
	{"-123456789012345678901234567890.12345678901234567890123456789012345678901234567890", "1", "-123456789012345678901234567889.12345678901234567890123456789012345678901234567890"},
	{"123456789012345678901234567890.12345678901234567890123456789012345678901234567890", "1", "123456789012345678901234567891.12345678901234567890123456789012345678901234567890"},
	{"-12345678901234567890123456789012345678901234567890.123456789012345678901234567891", "1", "-12345678901234567890123456789012345678901234567889.123456789012345678901234567891"},
	{"-123456789012345678901234567890.123456789012345678901234567891", "1", "-123456789012345678901234567889.123456789012345678901234567891"},
	{"123.123", "1", "124.123"},
	{"-123.123", "1", "-122.123"},
	{"123123123.123456", "1", "123123124.123456"},
	{"-123123.123", "1", "-123122.123"},
	{"1", "1", "2"},
}

func TestBigFloat_Add(t *testing.T) {
	for _, te := range testAddTable {
		a := BigFloat{}
		a.CreateFromString(te.a, ToNearestEven)

		b := BigFloat{}
		b.SetString(te.b)

		newData := BigFloat{}
		newData.Add(a, b)

		if strings.TrimRight(newData.String(), "0") != strings.TrimRight(te.output, "0") {
			t.Errorf("expected %s, got %s a:%v, b:%v", te.output, newData.String(), te.a, te.b)
		}
	}
}
